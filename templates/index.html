<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinema Scout | Movie Recommender</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
<div class="background-shapes"></div>
<div class="container py-5">
    <div class="header-section text-center mb-5">
        <h1 class="display-4"><i class="fas fa-film movie-icon"></i> Cinema Scout</h1>
        <p class="lead text-light mb-4">Your personal movie matchmaker - discover films tailored just for you!</p>
        <div class="header-divider"></div>
    </div>

    <div class="form-container mb-5 d-flex justify-content-center">
        <div class="search-card">
            <div class="search-card-inner">
                <h3 class="search-title text-center">Find Your Next Favorite Movie</h3>
                <form method="POST" class="search-form">
                    <div class="select-wrapper mb-3">
                        <i class="fas fa-search search-icon"></i>
                        <select name="movie" id="movie" class="form-select custom-select" required>
                            <option value="" disabled selected>Select a movie you love...</option>
                            {% for movie in movies %}
                                <option value="{{ movie }}" {% if movie == selected_movie %}selected{% endif %}>{{ movie }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    {# Recommendation basis dropdown removed #}
                    <div class="text-center mt-3">
                        <button type="submit" class="btn btn-primary btn-lg search-button">
                            <span class="btn-text">Discover Movies</span>
                            <i class="fas fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    {% if recommendations %}
        <div class="recommendations-section">
            <div class="section-header text-center mb-4">
                <h2 class="section-title">Your Personalized Recommendations</h2>
                <p class="section-subtitle">Based on your selection: <span class="selected-movie">{{ selected_movie }}</span></p>
                <div class="section-divider mx-auto"></div>
            </div>
            
            <div class="row g-4 mt-3 justify-content-center">
                {% for rec in recommendations %}
                    <div class="col-md-6 col-lg-4 fade-in" style="animation-delay: {{ loop.index0 * 0.1 }}s">
                        <div class="movie-card">
                            <div class="movie-poster">
                                <!-- Movie poster placeholder with dynamic gradient based on similarity -->
                                <div class="poster-placeholder" style="background: linear-gradient(45deg, hsl({{ rec.color_h }}, {{ rec.color_s }}%, {{ rec.color_l }}%), hsl({{ rec.color_h + 40 }}, {{ rec.color_s }}%, {{ rec.color_l + 10 }}%));">
                                    <i class="fas fa-film poster-icon"></i>
                                </div>
                            </div>
                            <div class="movie-content">
                                <h3 class="movie-title">{{ rec.title }}</h3>
                                
                                <div class="genres-container">
                                    {% for genre in rec.genres[:3] %}
                                        <span class="genre-badge">{{ genre }}</span>
                                    {% endfor %}
                                    {% if rec.genres|length > 3 %}
                                        <span class="more-badge">+{{ rec.genres|length - 3 }}</span>
                                    {% endif %}
                                </div>
                                
                                <div class="movie-details">
                                    <div class="movie-detail">
                                        <i class="fas fa-building detail-icon"></i>
                                        <span class="detail-text">{{ rec.production_companies[0] if rec.production_companies else "Independent" }}</span>
                                    </div>
                                </div>
                                
                                {# Overview removed from main card; only shown in More Info #}
                                
                                <div class="keywords-container">
                                    {% for keyword in rec.keywords[:5] %}
                                        <span class="keyword-pill">{{ keyword }}</span>
                                    {% endfor %}
                                </div>
                                
                                {# Why recommended section removed as requested #}

                                <div class="movie-actions">
                                    <button class="btn-details" data-bs-toggle="collapse" data-bs-target="#details-{{ loop.index }}">
                                        <i class="fas fa-info-circle"></i> More Info
                                    </button>
                                </div>
                                
                                <div class="collapse" id="details-{{ loop.index }}">
                                    <div class="additional-details">
                                        <h5>Production Companies</h5>
                                        <div class="companies-list">
                                            {% for company in rec.production_companies %}
                                                <span class="company-badge">{{ company }}</span>
                                            {% endfor %}
                                        </div>
                                        <h5 class="mt-3">Main Cast</h5>
                                        <div class="actors-list">
                                            {% for actor in rec.cast %}
                                                <span class="actor-badge"><i class="fas fa-user me-1"></i>{{ actor }}</span>
                                            {% endfor %}
                                        </div>
                                        <h5 class="mt-3">Full Overview</h5>
                                        <p>{{ rec.overview }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% elif request.method == 'POST' %}
        <div class="no-results text-center">
            <i class="fas fa-search no-results-icon"></i>
            <h3>No recommendations found</h3>
            <p>Try selecting a different movie</p>
        </div>
    {% endif %}
</div>

<!-- Footer -->
<footer class="footer text-center">
    <div class="container">
        <p class="footer-text">Cinema Scout Â© 2023 | Your Personal Movie Recommendation Engine</p>
        <div class="footer-links">
            <a href="#" class="footer-link"><i class="fab fa-github"></i></a>
            <a href="#" class="footer-link"><i class="fab fa-twitter"></i></a>
            <a href="#" class="footer-link"><i class="fas fa-envelope"></i></a>
        </div>
    </div>
</footer>

<!-- Bootstrap JS and Popper.js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Animate elements when page loads
        const elements = document.querySelectorAll('.fade-in');
        elements.forEach((element, index) => {
            setTimeout(() => {
                element.classList.add('visible');
            }, index * 100);
        });
        
        // Add animation on select focus
        const select = document.querySelector('.custom-select');
        if(select) {
            select.addEventListener('focus', function() {
                this.parentElement.classList.add('select-focused');
            });
            select.addEventListener('blur', function() {
                this.parentElement.classList.remove('select-focused');
            });
        }
    });
</script>
</body>
</html>
